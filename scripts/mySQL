DROP DATABASE IF EXISTS smart;
CREATE DATABASE smart;
use smart;
CREATE TABLE gruppe (
id int(10) NOT NULL,
name varchar(50),
manager varchar(50),
description varchar(100),
PRIMARY KEY (id)
);
CREATE TABLE ou (
id int(10) NOT NULL,
name varchar(50),
description varchar(100),
PRIMARY KEY (id)
);
CREATE TABLE benutzer (
id int(10) NOT NULL,
ou int(10),
login varchar(50),
password varchar(50),
beschreibung varchar(50), #Position/Aufgabe
vorname varchar(50),
nachname varchar(50),
email varchar(50),
ophone varchar(50),
mphone varchar(50),
company varchar(50),
abteilung varchar(50),
office varchar(50),
PRIMARY KEY (id),
FOREIGN KEY (ou) REFERENCES ou(id)
);
CREATE TABLE rechner (
id int(10) NOT NULL,
ou int(10),
name varchar(50),
PRIMARY KEY (id),
FOREIGN KEY (ou) REFERENCES ou(id)
);
CREATE TABLE benutzer_gruppe (
benutzer int(10),
gruppe int(10),
PRIMARY KEY (benutzer,gruppe),
FOREIGN KEY (benutzer) REFERENCES benutzer(id),
FOREIGN KEY (gruppe) REFERENCES gruppe(id)
);
CREATE TABLE rechner_gruppe (
rechner int(10),
gruppe int(10),
PRIMARY KEY (rechner,gruppe),
FOREIGN KEY (rechner) REFERENCES rechner(id),
FOREIGN KEY (gruppe) REFERENCES gruppe(id)
);
INSERT INTO gruppe (id,name,manager,description)
VALUES (0,'global','admin','Gruppe für alle'),
(1,'mitarbeiter','admin','Gruppe für Mitarbeiter (inkl. Schulungsleiter)'),
(2,'schulungsleiter','admin','Gruppe für Schulungsleiter'),
(3,'schulungsteilnehmer','admin','Gruppe für Schulungsteilnehmer');
INSERT INTO ou (id,name,description)
VALUES (0,'SmartGmbH','Gesamtes Unternehmen'),
(1,'Geschäftsführung','Geschäftsführung'),
(2,'Verwaltung','Verwaltung'),
(3,'Schulung','Schulungen'),
(4,'Allgemein','Schulungen Allgemein'),
(5,'Technik','Schulungen Technik'),
(6,'Raum1','Schulungen Raum1'),
(7,'Raum2','Schulungen Raum2'),
(8,'Raum3','Schulungen Raum3'),
(9,'Raum4','Schulungen Raum4'),
(10,'Raum5','Schulungen Raum5'),
(11,'Raum6','Schulungen Raum6');
INSERT INTO benutzer ()
VALUES ();
INSERT INTO rechner ()
VALUES ();
INSERT INTO benutzer_gruppe ()
VALUES ();
INSERT INTO rechner_gruppe ()
VALUES ();
